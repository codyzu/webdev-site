# Firebase Hosting

## 1 Firebase Project

### 1.1 Create a new Firebase Project

1. [https://console.firebase.google.com](https://console.firebase.google.com)
1. Sign in to your google account
1. "Add project"
1. Give your project a unique name, keep the default settings, and accept all of the options:
   ![new project](images/firebase-add-project-annotated.jpg)

## 1.2 Add Firebase into your project

1. Start in the root of your calculator project (the same directory as your `package.json` file).

1. Build your react project:
   ```cmd
   yarn build
   ```
   _Note: you now have a `build` directory containing the files required to deploy your application._

1. Add the firebase-tools package
   ```cmd
   yarn add --dev firebase-tools
   ```

1. Add a npm run-script to make it easier to run.

   `package.json`:
   ```javascript
   // ...

   "scripts": {
     // ...
     "firebase": "firebase"
   },

   // ...
   ```

1. Login to Firebase:
   ```cmd
   npm run firebase -- --help
   npm run firebase -- login
   ```

## 2 Hosting your react site

1. Enable Firebase hosting:
   ```cmd
   npm run firebase -- init
   ```
   1. Enable `Hosting` with the space bar and then press enter.
   1. _"Select a default Firebase project for this directory"_ **select `don't setup a default project` and press enter
   1. ‚ö†Ô∏è ‚ò£Ô∏è **DO NOT SKIP THIS STEP** ‚ò£Ô∏è ‚ö†Ô∏èÔ∏è _"What do you want to use as your public directory? (public)"_: **enter `build`**, the directory containing your built react application.
   1. _"Configure as a single-page app (rewrite all urls to /index.html)?"_: **enter `y`** because our react application is a single page application.
   1. _"File build/index.html already exists. Overwrite?"_: **enter `n`** since we want to use the `index.html` generated by the react build process.

   üí° _Note that Firebase added 2 new files, `.firebaserc` that remembers which firebase project to use by default and `firebase.json` that contains some firebase settings, including those that you configured above._

1. Link your local project to your Firebase project:
   ```cmd
   npm run firebase -- use --add
   ```
   1. _" Which project do you want to add?"_ **select the project you create before and press enter**
   1. _"What alias do you want to use for this project? (e.g. staging)"_ **enter `default` and press enter**

1. Deploy your application!
   ```cmd
   npm run firebase -- deploy
   ```

1. Navigate to the URL provided by firebase in console. It should resemble: `https://{your project name}.firebaseapp.com`

   Try accessing your site with smartphone. You just deployed your first site, with SSL, to the cloud... for free!

1. In your browser, in the Firebase console, go to the "Hosting" page. Here you could associate a custom domain. You can also see your deployment history with the option to rollback to a previous deployment.

#### Exercise 2.1 Update your site and redeploy. Use the Firebase console to roll back your deployment.
